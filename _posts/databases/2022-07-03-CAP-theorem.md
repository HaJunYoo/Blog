---
toc: true
layout: post
comments: true
title: CAP 이론
description: CAP 이론과 비정형 데이터
categories: [database]
image: images/database/cap.png
---

### 정형 데이터

고정된 필드에 저장된 데이터

데이터베이스를 설계한 사람에 의해 수집되는 정보의 형태가 정해짐

- 예를 들어 관계형 데이터 베이스의 테이블들, 스프레드시트 등
    
![]({{site.baseurl}}/images/database/테이블.png) 

### 비정형 데이터란?

- 미리 정해져서 고정되어 있는 필드에 저장되어 있지 않은 데이터
- 스마트 기기에서 페이스북, 트위터, 유튜브 등으로 생성되는 소셜 데이터
- IoT 환경에서 생성되는 위치 정보나 센서 데이터와 같은 사물 데이터 등
- 문서, 그림, 영상 등이 이에 해당

**빅데이터 시대의 주요 특징**

- 데이터의 크기가 엄청나게 크다
- 데이터의 형태가 비정형적이고, 다양하다
- 빠른 처리속도가 요구된다

**비정형 데이터베이스 등장 배경**

- 기존의 RDB나 DW와 같은 정형 데이터 베이스만으로는 해결이 어려움
- 분산 시스템으로 갈 수 밖에 없다
- 분산환경 하여서 대용량의 데이터를 신속하게 처리할 비정형 데이터베이스의 등장
    - NoSQL, Hadoop 등

### `분산 시스템`이란?

- 작업이나 데이터를 여러 대의 컴퓨터에 나누어서 처리, 저장하여 그 내용이나 결과가 통신망을 통해 상호교환 되도록 연결되어 있는 시스템

### `CAP 이론`이란?

- 2000년경 버클리 대학 에릭 브루어(Eric Brewer)가 주창한 이론으로, 2002년경 증명
- CAP정리(CAP Theorem), 혹은 브루어 정리(Brewer’s theorem) 등 으로 불리움

![]({{site.baseurl}}/images/database/cap.png "CAP") 

**CAP theorem**

> 분산 컴퓨터 시스템에서 다음과 같은 세가지 조건을 모두 만족하는 시스템을 존재할 수 없음을 증명한 정리
> 
- `C(Consistency)` : 모든 노드들이 같은 시점에 같은 값을 볼 수 있다 (또는 에러) → 한쪽이 업데이트 되면 즉시 같은 정보가 보여져야 한다
- `A (Availability)` : 모든 request는 에러 없이 response를 받을 수 있다. (최신 값을 return함은 보장 안함)
    - 일부 노드가 다운되어도 다른 노드에 영향을 주지 않아야 함
    - 특정 노드가 장애가나도 서비스가 가능해야 한다”라는 의미
- `P (Partition tolerance)` : network partition이 나서 message의 분실이 발생해도 시스템이 계속 동작해야 한다
    - 구성된 분산 시스템에 노드 장애가 있어 일부 데이터를 손실 하더라도 사용자는 다른 최신 데이터에 접속하여 정상 동작할 수 있어야 한다
- NoSQL은 consistency와 availability을 동시에 제공하지 않는다 - 불가능
- 두 가지 만족이 가능하다
    - C-A, C-P, A-P
- 최근 CAP 이론이 주목받는 이유
    - 빅데이터 저장 문제
    
- 기존의 RDB가 C(일관성)와 A(가용성) 중심이라면 **비정형 데이터베이스는 `P(지속성)`을 중시**