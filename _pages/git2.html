---
layout: default
permalink: /git2/
title: git2
search_exclude: true
---
<script>



await axios
  .get(`https://api.github.com/users/$HaJunYoo/repos`, {
	headers: {
		Accept: "application/vnd.github.nightshade-preview+json",
				// Authorization: `Token b6b4269b1...`,
		},
	})
	.then((el) => changeHandler(el.data));

const changeHandler = (data) => {
	const repoData = JSON.stringify(data);
	localStorage.setItem("repoData", repoData);
	setToggle(!toggle);
};

// repoRegister 개수만큼 요청 후 해당 이슈만큼 map으로 뿌려줌
useEffect(() => {
	// 처음 불러올때 초기화
	let temp = [];
	const username = localStorage.getItem("username");
	const repoRegister = JSON.parse(localStorage.getItem("repoRegister"));

	if (repoRegister) {
		const getRepo = async () => {
			for (let i = 0; i < repoRegister.length; i++) {
				let url = `htts://api.github.com/repos/$HaJunYoo/${repoRegister[i].name}/issues`;

				await axios
					.get(url, {
						headers: {
							Accept: "application/vnd.github.nightshade-preview+json",
						},
					})
					.then((res) =>
						res.data.forEach((el) => {
							el.repo = repoRegister[i].name;
							temp.push(el);
						})
					);
			}
			setLoading(!loading);
			setIssue(temp);
		};
		getRepo();
	}
	}, []);

</script>